{
  "name": "Acme API to X12 850",
  "type": "only_mapped_keys",
  "mapping": "{\n  \"heading\": {\n    \"transaction_set_header_ST\": { \"transaction_set_identifier_code_01\": \"850\", \"transaction_set_control_number_02\": $$.controlNumber },\n    \"beginning_segment_for_purchase_order_BEG\": {\n      \"transaction_set_purpose_code_01\": \"00\",\n      \"purchase_order_type_code_02\": $lookupTable($tables.purchaseOrderType, \"Key\", $$.orderDetails.orderType).Value,\n      \"purchase_order_number_03\": $$.orderDetails.orderNumber,\n      \"date_05\": $convertDateTime($$.orderDetails.orderDate, $dateTime.RFC3339, \"yyyy-MM-dd\")\n    },\n    \"reference_information_REF_customer_order\": [\n      { \"reference_identification_qualifier_01\": \"CO\", \"reference_identification_02\": $$.orderDetails.internalOrderNumber }\n    ],\n    \"reference_information_REF_memo_field\": [\n      { \"reference_identification_qualifier_01\": \"ZZ\", \"reference_identification_02\": $$.orderDetails.orderMemo }\n    ],\n    \"administrative_communications_contact_PER\": {\n      \"contact_function_code_01\": \"OC\",\n      \"name_02\": $$.orderDetails.orderAdminContact.name,\n      \"communication_number_qualifier_03\": \"TE\",\n      \"communication_number_04\": $$.orderDetails.orderAdminContact.phone,\n      \"communication_number_qualifier_05\": \"EM\",\n      \"communication_number_06\": $$.orderDetails.orderAdminContact.email\n    },\n    \"carrier_details_routing_sequence_transit_time_TD5\": {\n      \"transportation_method_type_code_04\": \"ZZ\",\n      \"routing_05\": $lookupTable($tables.carrierDetails, \"Key\", $uppercase($$.shippingDetails.carrier)).Value\n    },\n    \"party_identification_N1_loop\": [$$.shipTo]\n      .{\n        \"party_identification_N1\": {\n          \"entity_identifier_code_01\": \"ST\",\n          \"name_02\": $.name,\n          \"identification_code_qualifier_03\": \"92\",\n          \"identification_code_04\": $.customerId\n        },\n        \"party_location_N3\": [$.address].{ \"address_information_01\": $.street1, \"address_information_02\": $.street2 }[],\n        \"geographic_location_N4\": [$.address]\n          .{ \"city_name_01\": $.city, \"state_or_province_code_02\": $.state, \"postal_code_03\": $.zip, \"country_code_04\": $.country }[]\n      }[]\n  },\n  \"detail\": {\n    \"baseline_item_data_PO1_loop\": $$\n      .items\n      .{\n        \"baseline_item_data_PO1\": {\n          \"assigned_identification_01\": $.id,\n          \"quantity_02\": $pad($string($.quantity), -4, \"0\"),\n          \"unit_or_basis_for_measurement_code_03\": \"EA\",\n          \"unit_price_04\": $.price,\n          \"product_service_id_qualifier_06\": \"VC\",\n          \"product_service_id_07\": $.vendorPartNumber,\n          \"product_service_id_qualifier_08\": \"SK\",\n          \"product_service_id_09\": $.sku\n        },\n        \"product_item_description_PID_loop\": [\n          {\n            \"product_item_description_PID\": { \"item_description_type_01\": \"F\", \"description_05\": $.description }\n          }\n        ]\n      }[]\n  },\n  \"summary\": {\n    \"transaction_totals_CTT_loop\": [\n      {\n        \"transaction_totals_CTT\": { \"number_of_line_items_01\": $count($$.items) },\n        \"monetary_amount_information_AMT\": { \"amount_qualifier_code_01\": \"TT\", \"monetary_amount_02\": $sum($$.items.(price * quantity)) }\n      }\n    ]\n  }\n}",
  "source": {
    "content": "{\"$schema\":\"https://json-schema.org/draft/2020-12/schema\",\"type\":\"object\",\"properties\":{\"controlNumber\":{\"type\":\"string\"},\"orderDetails\":{\"type\":\"object\",\"properties\":{\"internalOrderNumber\":{\"type\":\"string\"},\"orderNumber\":{\"type\":\"string\"},\"orderType\":{\"type\":\"string\"},\"orderDate\":{\"type\":\"string\"},\"orderMemo\":{\"type\":\"string\"},\"orderAdminContact\":{\"type\":\"object\",\"properties\":{\"name\":{\"type\":\"string\"},\"address\":{\"type\":\"object\",\"properties\":{\"street1\":{\"type\":\"string\"},\"street2\":{\"type\":\"null\"},\"city\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"},\"zip\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"}}},\"phone\":{\"type\":\"string\"},\"email\":{\"type\":\"string\"}}}}},\"shippingDetails\":{\"type\":\"object\",\"properties\":{\"carrier\":{\"type\":\"string\"}}},\"shipTo\":{\"type\":\"object\",\"properties\":{\"customerId\":{\"type\":\"string\"},\"name\":{\"type\":\"string\"},\"address\":{\"type\":\"object\",\"properties\":{\"street1\":{\"type\":\"string\"},\"street2\":{\"type\":\"null\"},\"city\":{\"type\":\"string\"},\"state\":{\"type\":\"string\"},\"zip\":{\"type\":\"string\"},\"country\":{\"type\":\"string\"}}}}},\"items\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"properties\":{\"id\":{\"type\":\"string\"},\"quantity\":{\"type\":\"number\"},\"unitCode\":{\"type\":\"string\"},\"price\":{\"type\":\"number\"},\"vendorPartNumber\":{\"type\":\"string\"},\"buyerPartNumber\":{\"type\":\"string\"},\"description\":{\"type\":\"string\"},\"sku\":{\"type\":\"string\"}}}}},\"default\":{\"controlNumber\":\"000012345\",\"orderDetails\":{\"internalOrderNumber\":\"ACME-4567\",\"orderNumber\":\"365465413\",\"orderType\":\"drop-ship\",\"orderDate\":\"2022-08-30T14:22:22Z\",\"orderMemo\":\"Thank you for your business\",\"orderAdminContact\":{\"name\":\"Marvin Acme\",\"address\":{\"street1\":\"123 Main Street\",\"city\":\"Fairfield\",\"state\":\"NJ\",\"zip\":\"07004\",\"country\":\"US\"},\"phone\":\"973-555-1212\",\"email\":\"marvin@acme.com\"}},\"shippingDetails\":{\"carrier\":\"FedEx Home Delivery\"},\"shipTo\":{\"customerId\":\"123\",\"name\":\"Wile E Coyote\",\"address\":{\"street1\":\"111 Canyon Court\",\"city\":\"Phoenix\",\"state\":\"AZ\",\"zip\":\"85001\",\"country\":\"US\"}},\"items\":[{\"id\":\"item-1\",\"quantity\":8,\"unitCode\":\"EA\",\"price\":400,\"vendorPartNumber\":\"VND1234567\",\"sku\":\"ACM/8900-400\",\"description\":\"400 pound anvil\"},{\"id\":\"item-2\",\"quantity\":4,\"unitCode\":\"EA\",\"price\":125,\"vendorPartNumber\":\"VND000111222\",\"sku\":\"ACM/1100-001\",\"description\":\"Detonator\"}]}}",
    "type": "jsonschema@2020-12",
    "name": "source document"
  },
  "target": {
    "content": "{\"$schema\":\"https://json-schema.org/draft/2020-12/schema\",\"properties\":{\"heading\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"transaction_set_header_ST\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"transaction_set_identifier_code_01\":{\"type\":\"string\",\"default\":\"850\",\"enum\":[\"850\"],\"x12-codes\":{\"850\":{\"code\":\"850\"}}},\"transaction_set_control_number_02\":{\"type\":\"string\",\"minLength\":4,\"maxLength\":9}},\"required\":[\"transaction_set_identifier_code_01\",\"transaction_set_control_number_02\"]},\"beginning_segment_for_purchase_order_BEG\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"transaction_set_purpose_code_01\":{\"type\":\"string\",\"x12-codes\":{\"00\":{\"description\":\"Original\",\"code\":\"00\"}},\"enum\":[\"00\"]},\"purchase_order_type_code_02\":{\"type\":\"string\",\"x12-codes\":{\"DS\":{\"description\":\"Dropship\",\"code\":\"DS\"},\"SS\":{\"description\":\"Supply or Service Order\",\"code\":\"SS\"}},\"enum\":[\"DS\",\"SS\"]},\"purchase_order_number_03\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":22},\"date_05\":{\"type\":\"string\",\"format\":\"date\",\"x12-format\":\"CCYYMMDD\"}},\"required\":[\"transaction_set_purpose_code_01\",\"purchase_order_type_code_02\",\"purchase_order_number_03\",\"date_05\"]},\"reference_information_REF_division_code\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"reference_identification_qualifier_01\":{\"type\":\"string\",\"x12-codes\":{\"19\":{\"description\":\"Division Identifier\",\"code\":\"19\"},\"CC\":{\"description\":\"Contract Co-op Number\",\"code\":\"CC\"}},\"enum\":[\"19\",\"CC\"]},\"reference_identification_02\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":50}},\"required\":[\"reference_identification_qualifier_01\",\"reference_identification_02\"],\"description\":\"To add any additional routing information for Trading Partner divisions. Please reach out to Acme if you need this populated.\",\"title\":\"Reference Information - Division Code\"},\"minItems\":1},\"reference_information_REF_customer_order\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"reference_identification_qualifier_01\":{\"type\":\"string\",\"x12-codes\":{\"CO\":{\"description\":\"Customer Order Number\",\"code\":\"CO\"}},\"enum\":[\"CO\"]},\"reference_identification_02\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":50,\"description\":\"Reference information as defined for a particular Transaction Set or as specified by the Reference Identification Qualifier\\n\\n\"}},\"required\":[\"reference_identification_qualifier_01\",\"reference_identification_02\"],\"description\":\"Indicates Acme's internal sales order number, available upon request.\",\"title\":\"Reference Information - Customer Order\"},\"minItems\":1},\"reference_information_REF_memo_field\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"reference_identification_qualifier_01\":{\"type\":\"string\",\"x12-codes\":{\"ZZ\":{\"description\":\"Mutually Defined\",\"code\":\"ZZ\"}},\"enum\":[\"ZZ\"]},\"reference_identification_02\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":50,\"examples\":[\"Memo field\"]}},\"required\":[\"reference_identification_qualifier_01\",\"reference_identification_02\"],\"description\":\"Optional memo field, available upon request\",\"title\":\"Reference Information - Memo Field\"},\"minItems\":1},\"administrative_communications_contact_PER\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"contact_function_code_01\":{\"type\":\"string\",\"x12-codes\":{\"OC\":{\"description\":\"Order Contact\",\"code\":\"OC\"}},\"enum\":[\"OC\"]},\"name_02\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":60},\"communication_number_qualifier_03\":{\"type\":\"string\",\"x12-codes\":{\"TE\":{\"description\":\"Telephone\",\"code\":\"TE\"}},\"enum\":[\"TE\"]},\"communication_number_04\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":256},\"communication_number_qualifier_05\":{\"type\":\"string\",\"x12-codes\":{\"EM\":{\"description\":\"Electronic Mail\",\"code\":\"EM\"}},\"enum\":[\"EM\"]},\"communication_number_06\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":256}},\"required\":[\"contact_function_code_01\",\"name_02\",\"communication_number_qualifier_03\",\"communication_number_04\"],\"allOf\":[{\"x12-condition\":\"P0506\",\"dependentRequired\":{\"communication_number_qualifier_05\":[\"communication_number_06\"],\"communication_number_06\":[\"communication_number_qualifier_05\"]}}]},\"carrier_details_routing_sequence_transit_time_TD5\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"transportation_method_type_code_04\":{\"type\":\"string\",\"x12-codes\":{\"ZZ\":{\"description\":\"Mutually defined\",\"code\":\"ZZ\"}},\"enum\":[\"ZZ\"]},\"routing_05\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":35,\"examples\":[\"FHD\",\"FR\"],\"description\":\"Free-form description of the routing or requested routing for shipment, or the originating carrier's identity. \\n\\nFHD - FedEx Home Delivery\\nFR - FedEx Freight\"}},\"required\":[\"transportation_method_type_code_04\",\"routing_05\"]},\"party_identification_N1_loop\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"party_identification_N1\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"entity_identifier_code_01\":{\"type\":\"string\",\"x12-codes\":{\"ST\":{\"description\":\"Ship To\",\"code\":\"ST\"}},\"enum\":[\"ST\"]},\"name_02\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":60},\"identification_code_qualifier_03\":{\"type\":\"string\",\"x12-codes\":{\"92\":{\"description\":\"Assigned by Buyer or Buyer's Agent\",\"code\":\"92\"}},\"enum\":[\"92\"]},\"identification_code_04\":{\"type\":\"string\",\"minLength\":2,\"maxLength\":80,\"examples\":[\"DROPSHIP CUSTOMER\"]}},\"required\":[\"entity_identifier_code_01\",\"name_02\"],\"allOf\":[{\"x12-condition\":\"P0304\",\"dependentRequired\":{\"identification_code_qualifier_03\":[\"identification_code_04\"],\"identification_code_04\":[\"identification_code_qualifier_03\"]}}],\"description\":\"To identify a party by type of organization, name, and code. \"},\"party_location_N3\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"address_information_01\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":55},\"address_information_02\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":55}},\"required\":[\"address_information_01\"]},\"minItems\":1,\"maxItems\":2},\"geographic_location_N4\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"city_name_01\":{\"type\":\"string\",\"minLength\":2,\"maxLength\":30},\"state_or_province_code_02\":{\"type\":\"string\",\"minLength\":2,\"maxLength\":2},\"postal_code_03\":{\"type\":\"string\",\"minLength\":3,\"maxLength\":15},\"country_code_04\":{\"type\":\"string\",\"minLength\":2,\"maxLength\":3}},\"description\":\"To specify the geographic place of the named party. \\n\\nA combination of N401 through N403 may be adequate to specify location\\nN402 is required only if the city name (N401) is in the U.S. or Canada\"},\"minItems\":1}},\"required\":[\"party_identification_N1\",\"party_location_N3\",\"geographic_location_N4\"]},\"maxItems\":1,\"minItems\":1}},\"required\":[\"beginning_segment_for_purchase_order_BEG\",\"carrier_details_routing_sequence_transit_time_TD5\",\"party_identification_N1_loop\"]},\"detail\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"baseline_item_data_PO1_loop\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"baseline_item_data_PO1\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"assigned_identification_01\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":20},\"quantity_02\":{\"minLength\":4,\"maxLength\":100,\"type\":\"string\"},\"unit_or_basis_for_measurement_code_03\":{\"type\":\"string\",\"x12-codes\":{\"EA\":{\"description\":\"Each\",\"code\":\"EA\"}},\"enum\":[\"EA\"]},\"unit_price_04\":{\"type\":\"number\",\"minimum\":0,\"maximum\":999999999999999},\"product_service_id_qualifier_06\":{\"type\":\"string\",\"x12-codes\":{\"VC\":{\"description\":\"Vendor's (Seller's) Catalog Number\",\"code\":\"VC\"}},\"enum\":[\"VC\"]},\"product_service_id_07\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":48,\"description\":\"Identifying number for a product or service. Vendor's code.\"},\"product_service_id_qualifier_08\":{\"type\":\"string\",\"x12-codes\":{\"SK\":{\"description\":\"Stock Keeping Unit (SKU)\",\"code\":\"SK\"}},\"enum\":[\"SK\"]},\"product_service_id_09\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":48,\"description\":\"Identifying number for a product or service. Acme's item SKU\"}},\"required\":[\"quantity_02\",\"unit_or_basis_for_measurement_code_03\",\"unit_price_04\",\"product_service_id_qualifier_06\",\"product_service_id_07\",\"product_service_id_qualifier_08\",\"product_service_id_09\"]},\"product_item_description_PID_loop\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"product_item_description_PID\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"item_description_type_01\":{\"type\":\"string\",\"x12-codes\":{\"F\":{\"description\":\"Free-form\",\"code\":\"F\"}},\"enum\":[\"F\"]},\"description_05\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":80,\"description\":\"A free-form description to clarify the related data elements and their content. This contains Acme's description of the product.\"}},\"required\":[\"item_description_type_01\"]}},\"required\":[\"product_item_description_PID\"]}},\"service_promotion_allowance_or_charge_information_SAC_loop\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"service_promotion_allowance_or_charge_information_SAC\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"allowance_or_charge_indicator_01\":{\"type\":\"string\",\"x12-codes\":{\"A\":{\"description\":\"Allowance\",\"code\":\"A\"},\"C\":{\"description\":\"Charge\",\"code\":\"C\"},\"P\":{\"description\":\"Promotion\",\"code\":\"P\"},\"S\":{\"description\":\"Service\",\"code\":\"S\"}},\"enum\":[\"A\",\"C\",\"P\",\"S\"]},\"service_promotion_allowance_or_charge_code_02\":{\"type\":\"string\",\"x12-codes\":{\"C310\":{\"description\":\"Discount\",\"code\":\"C310\"},\"E380\":{\"description\":\"Lift Gate (Truck) or Forklift Service at Pickup/Delivery\",\"code\":\"E380\"}},\"enum\":[\"C310\",\"E380\"]},\"amount_05\":{\"type\":\"number\",\"minimum\":0,\"maximum\":999999999999999},\"description_15\":{\"type\":\"string\",\"minLength\":1,\"maxLength\":80,\"examples\":[\"5% AD CO-OP DISCOUNT\",\"LIFT GATE ASSIST\"]}},\"required\":[\"allowance_or_charge_indicator_01\",\"service_promotion_allowance_or_charge_code_02\",\"amount_05\",\"description_15\"]},\"minItems\":1,\"maxItems\":25}}}}},\"required\":[\"baseline_item_data_PO1\",\"product_item_description_PID_loop\"]}}},\"required\":[\"baseline_item_data_PO1_loop\"]},\"summary\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"transaction_totals_CTT_loop\":{\"type\":\"array\",\"items\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"transaction_totals_CTT\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"number_of_line_items_01\":{\"type\":\"integer\",\"minimum\":0,\"maximum\":999999}},\"required\":[\"number_of_line_items_01\"]},\"monetary_amount_information_AMT\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"amount_qualifier_code_01\":{\"type\":\"string\",\"x12-codes\":{\"TT\":{\"description\":\"Total Transaction Amount\",\"code\":\"TT\"}},\"enum\":[\"TT\"]},\"monetary_amount_02\":{\"type\":\"number\",\"minimum\":0,\"maximum\":999999999999999}},\"required\":[\"amount_qualifier_code_01\",\"monetary_amount_02\"]}},\"required\":[\"transaction_totals_CTT\",\"monetary_amount_information_AMT\"]}},\"transaction_set_trailer_SE\":{\"type\":\"object\",\"additionalProperties\":false,\"properties\":{\"number_of_included_segments_01\":{\"type\":\"integer\",\"minimum\":0,\"maximum\":9999999999},\"transaction_set_control_number_02\":{\"type\":\"string\",\"minLength\":4,\"maxLength\":9,\"description\":\"Identifying control number that must be unique within the transaction set functional group assigned by the originator for a transaction set.\\n\\nSince AMT is in Summary TT must be used stating Transaction Total\"}},\"required\":[\"number_of_included_segments_01\",\"transaction_set_control_number_02\"]}},\"required\":[\"transaction_totals_CTT_loop\"]}},\"type\":\"object\",\"additionalProperties\":false,\"required\":[\"heading\",\"detail\",\"summary\"]}",
    "type": "jsonschema@2020-12",
    "name": "target document"
  },
  "lookupTables": [
    {
      "name": "carrierDetails",
      "values": [
        {
          "Key": "FEDEX HOME DELIVERY",
          "Value": "FHD"
        },
        {
          "Key": "FEDEX FREIGHT",
          "Value": "FR"
        }
      ]
    },
    {
      "name": "purchaseOrderType",
      "values": [
        {
          "Key": "drop-ship",
          "Value": "DS"
        },
        {
          "Key": "supply",
          "Value": "SS"
        }
      ]
    }
  ]
}